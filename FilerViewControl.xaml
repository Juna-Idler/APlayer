<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="APlayer.FilerViewControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:APlayer"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" Loaded="UserControl_Loaded" Unloaded="UserControl_Unloaded">

    <UserControl.Resources>
        <DataTemplate x:Key="FolderItemTemplate" x:DataType="local:FolderItem">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{x:Bind Name}" />
                <TextBlock Text="Folder" Grid.Column="1" TextAlignment="Left" />
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="AudioItemTemplate" x:DataType="local:FolderItem">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{x:Bind Name}" />
                <TextBlock Text="{x:Bind Extra,Mode=OneWay}" Grid.Column="1" TextAlignment="Left" />
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="ImageItemTemplate" x:DataType="local:FolderItem">
            <Grid Margin="0,2,0,2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Image Height="128" Source="{x:Bind Item.Path}"/>
                <TextBlock Text="{x:Bind Name}"  Grid.Column="1" VerticalAlignment="Center" />
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="TextItemTemplate" x:DataType="local:FolderItem">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{x:Bind Name}" />
                <TextBlock Text="Text File" Grid.Column="1" TextAlignment="Left" />
            </Grid>
        </DataTemplate>        
        
        <DataTemplate x:Key="UnknownItemTemplate" x:DataType="local:FolderItem">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{x:Bind Name}" />
                <TextBlock Text="Unknown File" Grid.Column="1" TextAlignment="Left" />
            </Grid>
        </DataTemplate>


        <local:FolderItemDataTemplateSelector x:Key="FolderItemDataTemplateSelector"
            Folder="{StaticResource FolderItemTemplate}"
            Audio="{StaticResource AudioItemTemplate}"
            Image="{StaticResource ImageItemTemplate}"
            Text="{StaticResource TextItemTemplate}"
                                              
            Unknown="{StaticResource UnknownItemTemplate}"
         />

    </UserControl.Resources>


    <Grid>
        <ListView x:Name="FolderListView" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                  ItemTemplateSelector="{StaticResource FolderItemDataTemplateSelector}" >

        </ListView>
    </Grid>
</UserControl>
